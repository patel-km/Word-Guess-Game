<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <title>Word Guessing Game</title>
        <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
        <link href="https://fonts.googleapis.com/css?family=Bad+Script|Dawning+of+a+New+Day" rel="stylesheet">

    </head>

    <body>
        <div class="container">
            <div class="head">
                <h1>Guess the Word</h1>
                <br>
                <p>
                    Start playing immediately by pressing a letter to make your first guess!
                </p>
                <br>
            </div>
            <div id="guesses">
                <!--Array of wrong guesses here -->
            </div>
            
            <div id="main-game">
                    <!-- Word blanks here -->
            </div>


        </div> <!--"Container" closing Div-->

        <div class="footer">
            KP
        </div>
        
        <script>

    //Global variables____________________________________________________________________________________________________________________________________

        var words = ["tomato", "oxygen","warrior", "bibliography", "awkward","yacht","bagpipes","pixel","crypt","banjo","phlegm","croquet","kiosk","dwarves","ivory","fervent","sphinx","gazebo","zombie","gypsy","haiku","hyphen","squawk","jukebox","kayak","wildebeest","klutz","mystify","ostracize","pajama","quip","rhythmic","fjord","rogue","swivel","twelfth","zealous","haphazard",];//List of terms for game
        var trueLetters= [];//once word is split up, letters will go in here
        var dashes = []; //for every item in above array, will replace with an underscore 
        var guessOption = ["a","b","c","d","e","f","g","h","i","h","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
        var userGuess = [];//keypress pushed into this array
        var chances = 9;
        var wins = 0;
        var losses = 0; 
        var correctGuesses = 0;
        
        
        

        

//Sequence_________________________________________________________________________________________________________________________________

    game ();

    document.onkeyup = function() {

        var userGuess = event.key.toLowerCase();

        game(userGuess);
        roundComplete();

            var html = 
                    "<h3>"+ userGuess +"</h3>"+
                    "<p>You have " + chances + " chances left to guess</p>"+
                    "<br>"+
                    "<br>"+
                    "<h2>Score:</h2>"+
                    "<p>Wins: "+ wins +"</p>"+
                    "<p>Losses: "+ losses +"</p>";

            document.querySelector("#main-game").innerHTML = html//Apply the script to the html
    };

//Below are the functions _______________________________________
            
            
//_______________________________________________________________

        //Display word from "words"
        //Replace the letters in that word with "_"
        function getWord() {
            var generatedWord = words[Math.floor(Math.random() * words.length)];

            trueLetters = generatedWord.split("");
            console.log(trueLetters);
            
            for (i = 0; i < trueLetters.length; i++) {
                dashes[i] = "_";
                console.log(dashes);
            }
            
            var html = 
            "<p>" + generatedWord + "</p>" +
            "<h2>Your guesses</h2>";

            document.querySelector("#main-game").innerHTML = html//Apply the script to the html

        }
    //_______________________________________________________________

    //Keypress effects_______________________________________________________________
        function game(guess) {

            var legitKey = false;

        //Is this key ok to press? (does it match any item in the guessOption array?) If yes, continue.
            for (var j = 0; j < guessOption.length; j++) {
                
                if (guess === guessOption[j]) {
                    legitKey=true;
                    var html = 
                    "<p>"+ trueLetters +"</p>";
                }
        //Has this key already been pressed? If not, continue. 
                for (k = 0; k < userGuess.length; k++) {
                    if (guess === userGuess[k]) {
                        legitKey=false;
                    } 
                }

        //Now we know this is an ok key to use. 
        //Is the key a right or wrong guess?
                if(legitKey) {

                    var correct = false;

                    for (var l = 0; l < trueLetters.length; l++) {
                        
                        if (guess === trueLetters[l]) {
                        //replace all instances of that letter in the word
                        //Replace _ with userGuess/keypress.
                        dashes[l] = userGuess;
                        correctGuesses++;
                        correct = true;
                        }
                    }

                    //right guess = no effect on chances
                    if (correct === true) {
                        chances = chances;
                    }
                    //wrong guess = chances--;
                    else {
                        chances = chances -1;
                    }

                    correct = false;
                }
            }
        };

    //_______________________________________________________________
        //Determine if user won or lost, and restart by doing getWord()
        //When user wins or loses, reset the elements for a new game with a new word
        function roundComplete() {
            if (chances === 0) {
                losses++;
                reset();
                getWord();
            } 

            else if (correctGuesses === trueLetters) {
                wins++;
                reset();
                getWord();
            }
        }

        function reset () {
                    correctGuesses = 0;
                    userGuess = [];
                    dashes= [];
                    trueLetters = [];
                    chances= 9;
        }

        </script>

    </body>

</html>