<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <title>Word Guessing Game</title>
        <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
        <link href="https://fonts.googleapis.com/css?family=Bad+Script|Dawning+of+a+New+Day" rel="stylesheet">

    </head>

    <body>
        <div class="container">
            <div class="head">
                <h1>Guess the Word</h1>
                <br>
                <p>
                    Start playing immediately by pressing a letter to make your first guess!
                </p>
                <br>
            </div>
            <div id="guesses">
                <!--Array of wrong guesses here -->
            </div>
            
            <div id="main-game">
                    <!-- Word blanks here -->
            </div>


        </div> <!--"Container" closing Div-->

        <div class="footer">
            KP
        </div>
        
        <script>
        //List of terms for game:
        var words = ["tomato", "oxygen","warrior", "bibliography", "awkward","yacht","bagpipes","pixel","crypt","banjo","phlegm","croquet","kiosk","dwarves","ivory","fervent","sphinx","gazebo","zombie","gypsy","haiku","hyphen","squawk","jukebox","kayak","wildebeest","klutz","mystify","ostracize","pajama","quip","rhythmic","fjord","rogue","swivel","twelfth","zealous","haphazard",];
        var userGuess = [];//wrong keypress pushed into this array
        var trueLetters= [];//once word is split up, letters will go in here
        var chances = 9;
        var wins = 0;
        var losses = 0;
        var dashes = 0;//will count the letters in the selected word and convert those letters to underscores
        var blanks = [];
        var html = 
            "<p>"+ getWord()+"</p>"+
            "<h2>Your guesses</h2>"+
            "<h3>"+ userGuess +"</h3>"+
            "<p>You have " + chances + " chances left to guess</p>"+
            "<br>"+
            "<br>"+
            "<h2>Score:</h2>"+
            "<p>Wins: "+wins+"</p>"+
            "<p>Losses: "+losses+"</p>";
        
        // game();
        // roundComplete();
        document.querySelector("#main-game").innerHTML = html//Apply the script to the html


    //Below are the functions _______________________________________
            
            
    //_______________________________________________________________
        //Display word from "words"
        //Replace the letters in that word with "_"
        function getWord() {
            var generatedWord = words[Math.floor(Math.random() * words.length)];

            trueLetters = generatedWord.split("");
            console.log(trueLetters);
            
            for (l=0; l<trueLetters.length; l++) {
                blanks[l] = "_";
            }

            console.log(blanks);
            return blanks.join(" ");
        }
    //_______________________________________________________________
        //Add the user's wrong guess into the array of guessed letters
        //Fill in the blank in the word if the user chooses a letter that matches
        //No effect on "chances" for a repeated keystroke, AKA can't get penalized for clicking the same wrong letter more than once.
        document.onkeyup = function(event) {
            var guess = String.fromCharCode(event.keyCode).toLowerCase();

                if (guess !== trueLetters) {
                    userGuess.push(guess);
                }

                if (guess===trueLetters.indexOf) {

                }

            for (var m=0; m < trueLetters.length; m++) {
                console.log(trueLetters[m]);
                console.log (guess===trueLetters[m]);

                if (guess===trueLetters[m]) {
                    //push guess at trueLetters[m];
                }
            }
            
            var html = 
            "<p>"+ trueLetters+"</p>"+
            "<h2>Your guesses</h2>"+
            "<p>"+ userGuess +"</p>"+
            "<p>You have " + chances + " chances left to guess</p>"+
            "<br>"+
            "<br>"+
            "<h2>Score:</h2>"+
            "<p>Wins: "+wins+"</p>"+
            "<p>Losses: "+losses+"</p>";

            game();
            document.querySelector("#main-game").innerHTML = html;
            
        }

        

    //_______________________________________________________________
        //When letter correctly guessed, replace "_" with the correct letter
        function game(letter) {
            console.log(trueLetters);
                if (trueLetters !== " " || trueLetters ==="") {
                    for (var k=0; k <trueLetters.length; k++) {
                        trueLetters[k].push("_");
                    }
                }
            var trueLetters = false;

            for (var i=0; i < dashes; i++) {
                
                if (trueLetters[i]===letter) {
                    trueLetters=true;
                var html = 
                    "<p>"+ trueLetters+"</p>";
                }
                
                if(trueLetters) {
                    for (var j=0; j < dashes; j++) {
                        
                        if (trueLetters[j]) {
                        trueLetters.push(guess); //replace all instances of that letter in the word

                        //no effect on chances
                        }
                    }
                }

                else {
                    //calculate chances remaining, since user just made a wrong guess
                }
            } 
        }

    //_______________________________________________________________
        //Determine if user won or lost, and restart by doing getWord()
        //When user wins or loses, reset the elements for a new game with a new word
        function roundComplete() {
            if (chances <1) {
                console.log(losses++);

            } else {//OR if (chances >0 && word filled in)
                console.log(wins++);
            }
            trueLetters.join ("");//puts blanks and letters together as a string

            getWord();
        }
    //_______________________________________________________________

    //Phil notes:
        //check if the guess is in the array of trueLetters
        //replace all instances of that blank with the guess
        //if not, wrong guess --> put in array

        
    
        </script>

    </body>

</html>